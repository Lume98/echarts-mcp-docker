version: '3.8'

services:
  mcp-echarts:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: mcp-echarts
    ports:
      - "3033:3033"
    environment:
      # 传输方式: sse 或 streamable
      - TRANSPORT=sse
      # 端口号
      - PORT=3033
      # 端点路径
      # SSE 默认: /sse
      # Streamable 默认: /mcp
      - ENDPOINT=/sse
      # MinIO 配置（可选）
      # - MINIO_ENDPOINT=localhost
      # - MINIO_PORT=9000
      # - MINIO_USE_SSL=false
      # - MINIO_ACCESS_KEY=minioadmin
      # - MINIO_SECRET_KEY=minioadmin
      # - MINIO_BUCKET_NAME=mcp-echarts
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:3033/sse"]
      interval: 30s
      timeout: 3s
      retries: 3
      start_period: 10s

